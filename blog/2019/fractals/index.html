<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Saeed  Nejati | Fractals, a personal obsession</title>
    <meta name="author" content="Saeed  Nejati" />
    <meta name="description" content="Personal homepage of Saeed Nejati.
" />
    <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website" />


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light" />

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚛️</text></svg>">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://saeednj.github.io/blog/2019/fractals/">
    
    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark" />

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    

  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="https://saeednj.github.io/"><span class="font-weight-bold">Saeed</span>   Nejati</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">about</a>
              </li>
              
              <!-- Blog -->
              <li class="nav-item active">
                <a class="nav-link" href="/blog/">blog</a>
              </li>

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/cv/">cv</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/publications/">publications</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/talks/">talks</a>
              </li>

              <!-- Toogle theme mode -->
              <div class="toggle-container">
                <a id="light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </a>
              </div>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Content -->
    <div class="container mt-5">
      <!-- _layouts/post.html -->

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Fractals, a personal obsession</h1>
    <p class="post-meta">October 25, 2019</p>
    <p class="post-tags">
      <a href="/blog/2019"> <i class="fas fa-calendar fa-sm"></i> 2019 </a>
        ·  
        <a href="/blog/tag/Fractals">
          <i class="fas fa-hashtag fa-sm"></i> Fractals</a>  
          <a href="/blog/tag/Math">
          <i class="fas fa-hashtag fa-sm"></i> Math</a>  
          
        ·  
        <a href="/blog/category/Personal">
          <i class="fas fa-tag fa-sm"></i> Personal</a>  
          <a href="/blog/category/Technical">
          <i class="fas fa-tag fa-sm"></i> Technical</a>  
          

    </p>
  </header>

  <article class="post-content">
    <p>I am very much into Fractals. Mostly because of their geometric art, but also interested in their mathematical properties. Specially the <a href="https://en.wikipedia.org/wiki/Sierpi%C5%84ski_triangle" target="_blank" rel="noopener noreferrer">Sierpinski triangle</a>. Usually fractals have very simple construction rules, but the result is aesthetically pleasing. Sierpinski is no different. What makes it fascinating to me is that it can be drawn in several very different ways. Here I show three ways that you can draw a Sierpinski triangle, or at least something that looks like one.</p>

<p>For creating graphical output on a webpage, I learned how to use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial" target="_blank" rel="noopener noreferrer">HTML5 canvas</a> and use javascript to draw shapes programatically. All of the shapes you see in this page are rendered on this page and are not pre-loaded images. Unfortunately I did not find a clean way to include html codes in the post from arbitrary locations using the jekyll system! Therefore, I had put the codes in the <code class="language-plaintext highlighter-rouge">_includes/fractals</code> folder as well as the <a href="https://github.com/saeednj/saeednj.github.io/tree/master/codes/fractals" target="_blank" rel="noopener noreferrer">codes/fractals</a> folder. The file <code class="language-plaintext highlighter-rouge">head.html</code> in that folder contains the common codes and helper functions for drawing on canvases.</p>

<script>
function Drawer(canvasID) {
this.canvas = document.getElementById(canvasID);
this.canvasWidth = this.canvas.width;
this.canvasHeight = this.canvas.height;
this.ctx = this.canvas.getContext("2d");
this.canvasData = this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight);

this.drawPixel = function(x, y, r, g, b, a) {
x = Math.floor(x);
y = Math.floor(y);
var index = (x + y * this.canvasWidth) * 4;

this.canvasData.data[index + 0] = r;
this.canvasData.data[index + 1] = g;
this.canvasData.data[index + 2] = b;
this.canvasData.data[index + 3] = a;
};

this.updateCanvas = function() {
this.ctx.putImageData(this.canvasData, 0, 0);
};

this.clearCanvas = function() {
this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
this.ctx.beginPath();
for( var i=0; i<this.canvasData.data.length; i++ ) {
this.canvasData.data[i] = 0;
}
};

this.drawLine = function(x1, y1, x2, y2, color = "red") {
this.ctx.moveTo(x1, y1);
this.ctx.lineTo(x2, y2);
this.ctx.strokeStyle = color;
this.ctx.stroke();
};

this.triangle = function(a, b, c, color = "red") {
this.ctx.moveTo(a.x, a.y);
this.ctx.lineTo(b.x, b.y);
this.ctx.lineTo(c.x, c.y);
this.ctx.lineTo(a.x, a.y);
this.ctx.strokeStyle = color;
this.ctx.stroke();
}
}
</script>

<p>Now, let’s get our canvases dirty!</p>

<h2 id="the-recursive-methoddefinition">The recursive method/definition</h2>

<p>The basic way to draw these triangles is the following steps:</p>
<ol>
  <li>Draw an equilateral triangle.</li>
  <li>Connect the middle points of each edge to form a triangle.</li>
  <li>Color the middle triangle.</li>
  <li>Repeat from step 2 for all not colored triangles (the other three newly created triangles).</li>
</ol>

<p>The canvas below shows the application of this recursive algorithm up to 6 steps.</p>

<canvas id="canvas_sierpinski_recursive" width="400" height="400" style="border:1px solid black"></canvas>

<script>
var tcolor = "#aa0000";

function recurhelper(drawer, a, b, c, depth) {
    if ( depth == 0 ) return;
    var m = {x: (a.x+b.x)/2, y: (a.y+b.y)/2};
    var n = {x: (a.x+c.x)/2, y: (a.y+c.y)/2};
    var p = {x: (b.x+c.x)/2, y: (b.y+c.y)/2};
    drawer.triangle(m, n, p, tcolor);
    recurhelper(drawer, a, m, n, depth-1);
    recurhelper(drawer, m, b, p, depth-1);
    recurhelper(drawer, n, p, c, depth-1);
}

function sierpinRecursive(drawer, depth) {
    drawer.clearCanvas();
    var v = [
        {x: drawer.canvasWidth, y: drawer.canvasHeight},
        {x: 0, y: drawer.canvasHeight},
        {x: drawer.canvasWidth/2, y: 0}
    ];
    drawer.triangle(v[0], v[1], v[2], tcolor);
    recurhelper(drawer, v[0], v[1], v[2], depth);
}

function go_sierpinski_recursive(drawer, depth, maxDepth) {
    sierpinRecursive(drawer, depth);
    var nextDepth = (depth + 1) % maxDepth;
    setTimeout(go_sierpinski_recursive, 1500, drawer, nextDepth, maxDepth);
}

go_sierpinski_recursive(new Drawer("canvas_sierpinski_recursive"), 0, 7);

</script>

<p>You can find the code that implements this method in <code class="language-plaintext highlighter-rouge">_includes/fractals/srecur.html</code>.</p>

<h2 id="the-chaos-game-method">The chaos game method</h2>

<p>This method is based on the property that if you draw a line from any point on a Sierpinski to any of the main three vertices, the midpoint of the line is also on the triangle!</p>

<p>Here is the high level algorithm using this property:</p>
<ol>
  <li>Put three point on the plane for the three vertices of the triangle.</li>
  <li>Start from any of these points.</li>
  <li>At the current point, randomly select one of the three vertices.</li>
  <li>Move halfway toward that vertex.</li>
  <li>Plot at the current point.</li>
  <li>Go to 3.</li>
</ol>

<p>The canvas below shows how adding more and more pixels, converges graphically to a Sierpinski triangle. You can find the code in <code class="language-plaintext highlighter-rouge">_includes/fractals/srand.html</code>.</p>

<canvas id="canvas_sierpinski_random" width="400" height="400" style="border:1px solid black"></canvas>

<script>
function sierpinskiRandom(drawer, pixelCount = 10000) {
    drawer.clearCanvas();
    var v = [
        {x: drawer.canvasWidth, y: drawer.canvasHeight},
        {x: 0, y: drawer.canvasHeight},
        {x: drawer.canvasWidth/2, y: 0}
    ];

    var m = {x: v[0].x, y: v[0].y};

    var step = 10;
    (
        function delayedLoop(i) {
            setTimeout(function (){
                for( var j=0; j<step; j++ ) {
                    var t = Math.floor(Math.random() * 3);
                    m.x = (m.x + v[t].x) / 2;
                    m.y = (m.y + v[t].y) / 2;
                    drawer.drawPixel(m.x, m.y, (t==0)*255, (t==1)*255, (t==2)*255, 255);
                }
                drawer.updateCanvas();
                if ( --i ) delayedLoop(i);
                else setTimeout(sierpinskiRandom, 10, drawer, pixelCount);
            }, 10);
        }
    )(pixelCount / step);
}

sierpinskiRandom(new Drawer("canvas_sierpinski_random"));

</script>

<p>The <a href="https://en.wikipedia.org/wiki/Chaos_game" target="_blank" rel="noopener noreferrer">Chaos game</a> is very interesting in general. For different polygons (not just triangle) and different fractions of distance toward vertices, you can get different fractals.</p>

<h2 id="the-binary-method">The binary method</h2>

<p>This property was the one that really blew me away when I first wrote a small code to print a Sierpinski in terminal. The code was as small as:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">64</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="mi">64</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span> <span class="p">)</span>
            <span class="n">printf</span><span class="p">(</span> <span class="n">i</span><span class="o">&amp;</span><span class="n">j</span> <span class="o">?</span> <span class="s">" "</span> <span class="o">:</span> <span class="s">"."</span> <span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As can be seen in the code, if the bitwise AND of <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code> coordinate of a point on the plane is 0, then it is on a shape that is very similar to the Sirepinski triangle. This property has been studied in the context of cellular automata, and it comes from the famous <a href="https://en.wikipedia.org/wiki/Rule_90" target="_blank" rel="noopener noreferrer">Rule 90</a>. These cellular autoamtons work on a 1-d array of cells and using an update rule generate the next array from the current array. Applying rule 90 repeatedly, generates a Sierpinski looking structure.</p>

<p>The canvas below shows this relation and its code is in <code class="language-plaintext highlighter-rouge">_includes/fractals/sbin.html</code>.</p>
<canvas id="canvas_sierpinski_binary" width="512" height="512" style="border:1px solid black"></canvas>

<script>
function sierpinBinary(d) {
    for( var x=0; x<d.canvasWidth; x++ )
        for( var y=0; y<d.canvasHeight; y++ )
            if ( !(x&y) ) d.drawPixel(x, y, 255, 0, 0, 255);
    d.updateCanvas();
}

sierpinBinary(new Drawer("canvas_sierpinski_binary"));

</script>

<h2 id="other-fractals-koch-snowflake">Other fractals: Koch snowflake</h2>

<p>I mainly wrote about Sierpinski, because it has many different ways to construct. However, I wanted to add one fractal other than Sierpinski. Koch snowflake has a very simple construction rule as well, but it has interesting mathematical properties and looks nice! For example it is continuous everywhere and diffrentiable nowehere!</p>

<p>The basic method of constructing it is as follows:</p>
<ol>
  <li>Draw an equilateral triangle.</li>
  <li>Divide each line segment into three equal segments.</li>
  <li>Draw an equilateral triangle using the middle segment as base</li>
  <li>Remove the middle line segment</li>
  <li>Go to 2</li>
</ol>

<p>The canvas below shows step of drawing this snowflake up to 4 steps. You can find the code in <code class="language-plaintext highlighter-rouge">_includes/fractals/koch.html</code>.</p>

<canvas id="canvas_koch" width="400" height="400" style="border:1px solid black"></canvas>

<script>
function koch(d, depth) {
    d.clearCanvas();
    var v = [
        {x: 3*d.canvasWidth/4, y: 3*d.canvasHeight/4},
        {x: d.canvasWidth/4, y: 3*d.canvasHeight/4},
        {x: d.canvasWidth/2, y: (3-Math.sqrt(3))*d.canvasHeight/4}
    ];

    var q = [];
    q.push({A: v[0], B: v[1], L: 0});
    q.push({A: v[1], B: v[2], L: 0});
    q.push({A: v[2], B: v[0], L: 0});
    while( q.length > 0 ) {
        var seg = q.shift();
        if ( seg.L == depth ) {
            d.drawLine(seg.A.x, seg.A.y, seg.B.x, seg.B.y);
            while( q.length > 0 ) {
                var seg = q.shift();
                d.drawLine(seg.A.x, seg.A.y, seg.B.x, seg.B.y);
            }
        }
        else {
            var a = {x: (2*seg.A.x + seg.B.x) / 3, y: (2*seg.A.y + seg.B.y) / 3};
            var b = {x: (seg.A.x + 2*seg.B.x) / 3, y: (seg.A.y + 2*seg.B.y) / 3};
            var diff = {x: a.x - b.x, y: a.y - b.y};
            var c = {
                x: diff.x / 2 - Math.sqrt(3) * diff.y / 2 + b.x,
                y: Math.sqrt(3) * diff.x / 2 + diff.y / 2 + b.y};
            q.push({A: seg.A, B: a, L: seg.L+1});
            q.push({A: a, B: c, L: seg.L+1});
            q.push({A: c, B: b, L: seg.L+1});
            q.push({A: b, B: seg.B, L: seg.L+1});
        }
    }
}

function koch_loop(drawer, depth, maxDepth) {
    koch(drawer, depth);
    var nextDepth = (depth + 1) % maxDepth;
    setTimeout(koch_loop, 1500, drawer, nextDepth, maxDepth);
}

koch_loop(new Drawer("canvas_koch"), 0, 5);

</script>

<p><br></p>


  </article><div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname  = 'saeednblog';
      var disqus_identifier = '/blog/2019/fractals';
      var disqus_title      = "Fractals, a personal obsession";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" target="_blank" rel="noopener noreferrer">comments powered by Disqus.</a>
</noscript>

</div>

    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        © Copyright 2022 Saeed  Nejati. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme.

      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" integrity="sha256-l/1pMF/+J4TThfgARS6KwWrk/egwuVvhRzfLAMQ6Ds4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha256-SyTu6CwrfOhaznYZPoolVw2rxoY7lKYKQvqbtqN93HI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="/assets/js/zoom.js"></script><!-- Load Common JS -->
  <script src="/assets/js/common.js"></script>

    <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-105305819-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-105305819-3');
  </script>
  </body>
</html>

